
# TODO add some prefixes or something to reduce duplication
# currently can't figure out how to get this to work


# Add exact matches to the dataset and do some minor mutation
# rearrangements like pushing unary recombinant mutations.
rule postprocess:
    input:
        "../inference/results/v1-beta1/v1-beta1_2023-02-21.ts"
    output:
        "sc2ts_v1_2023-02-21.trees"
    shell:
        """
        python -m sc2ts postprocess {input} {output} \
            --match-db=../inference/results/v1-beta1.matches.db
        """

    
rule map_deletions:
    input:
        "../data/viridian_mafft_2024-10-14_v1.vcz.zip",
        "sc2ts_v1_2023-02-21.trees"
    output:
        "sc2ts_v1_2023-02-21_md.trees"
    shell:
        """
        python -m sc2ts map-deletions {input} {output} 
        """
